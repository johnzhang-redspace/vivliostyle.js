function e(e){return e&&"object"==typeof e&&"default"in e?e.default:e}var n=e(require("@emotion/styled")),t=require("@vivliostyle/core"),o=require("react"),i=e(o);function r(){return(r=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])}return e}).apply(this,arguments)}function a(){var e,n,t=(e=["\n  overflow: scroll;\n  background: ",';\n\n  @media screen {\n    [data-vivliostyle-page-container] {\n      background: white;\n      z-index: 0;\n    }\n\n    [data-vivliostyle-viewer-viewport] {\n      display: flex;\n      overflow: auto;\n      position: relative;\n    }\n\n    [data-vivliostyle-outer-zoom-box] {\n      margin: auto;\n      overflow: hidden;\n      flex: none;\n    }\n\n    [data-vivliostyle-viewer-viewport] [data-vivliostyle-spread-container] {\n      display: flex;\n      flex: none;\n      justify-content: center;\n      transform-origin: left top;\n    }\n\n    [data-vivliostyle-viewer-viewport][data-vivliostyle-page-progression="ltr"]\n      [data-vivliostyle-spread-container] {\n      flex-direction: row;\n    }\n\n    [data-vivliostyle-viewer-viewport][data-vivliostyle-page-progression="rtl"]\n      [data-vivliostyle-spread-container] {\n      flex-direction: row-reverse;\n    }\n\n    [data-vivliostyle-viewer-viewport] [data-vivliostyle-page-container] {\n      margin: 0 auto;\n      flex: none;\n      transform-origin: center top;\n    }\n\n    [data-vivliostyle-viewer-viewport][data-vivliostyle-spread-view="true"]\n      [data-vivliostyle-page-container][data-vivliostyle-page-side="left"] {\n      margin-right: 1px;\n      transform-origin: right top;\n    }\n\n    [data-vivliostyle-viewer-viewport][data-vivliostyle-spread-view="true"]\n      [data-vivliostyle-page-container][data-vivliostyle-page-side="right"] {\n      margin-left: 1px;\n      transform-origin: left top;\n    }\n\n    [data-vivliostyle-viewer-viewport][data-vivliostyle-spread-view="true"]\n      [data-vivliostyle-page-container][data-vivliostyle-unpaired-page="true"] {\n      margin-left: auto;\n      margin-right: auto;\n      transform-origin: center top;\n    }\n  }\n\n  /* vivliostyle-viewport */\n  [data-vivliostyle-layout-box] {\n    position: absolute;\n    left: 0;\n    top: 0;\n    right: 0;\n    bottom: 0;\n    overflow: hidden;\n    z-index: -1;\n  }\n\n  [data-vivliostyle-debug] [data-vivliostyle-layout-box] {\n    right: auto;\n    bottom: auto;\n    overflow: visible;\n    z-index: auto;\n  }\n\n  [data-vivliostyle-page-container] {\n    position: relative;\n    overflow: hidden;\n  }\n\n  [data-vivliostyle-bleed-box] {\n    position: absolute;\n    overflow: hidden;\n    max-width: 100%;\n    max-height: 100%;\n    box-sizing: border-box;\n  }\n\n  [data-vivliostyle-page-box] ~ [data-vivliostyle-page-box] {\n    display: none;\n  }\n\n  [data-vivliostyle-toc-box] {\n    position: absolute;\n    left: 3px;\n    top: 3px;\n    overflow: scroll;\n    overflow-x: hidden;\n    background: rgba(248, 248, 248, 0.9);\n    border-radius: 2px;\n    box-shadow: 1px 1px 2px rgba(0, 0, 0, 0.4);\n  }\n\n  @media print {\n    [data-vivliostyle-toc-box] {\n      display: none;\n    }\n\n    [data-vivliostyle-outer-zoom-box],\n    [data-vivliostyle-spread-container] {\n      width: 100% !important;\n      height: 100% !important;\n    }\n\n    [data-vivliostyle-spread-container],\n    [data-vivliostyle-page-container] {\n      -moz-transform: none !important;\n      -ms-transform: none !important;\n      -webkit-transform: none !important;\n      transform: none !important;\n    }\n\n    [data-vivliostyle-page-container] {\n      display: block !important;\n      max-width: 100%;\n      height: 100% !important;\n      max-height: 100%;\n    }\n\n    /* Workaround for Chrome printing problem */\n    /* [data-vivliostyle-page-box] {\n        padding-bottom: 0 !important;\n        overflow: visible !important;\n    } */\n    [data-vivliostyle-bleed-box] > div > div::before {\n      display: block;\n      content: "";\n      padding-top: 0.015625px;\n      margin-bottom: -0.015625px;\n    }\n\n    /* Gecko-only hack, see https://bugzilla.mozilla.org/show_bug.cgi?id=267029#c17 */\n    @-moz-document regexp(\'.*\') {\n      [data-vivliostyle-page-container]:nth-last-of-type(n + 2) {\n        top: -1px;\n        margin-top: 1px;\n        margin-bottom: -1px;\n      }\n    }\n  }\n'],n||(n=e.slice(0)),e.raw=n,e);return a=function(){return t},t}var l=n.div(a(),function(e){return e.background});exports.Renderer=function(e){var n=e.source,a=e.page,d=void 0===a?1:a,v=e.zoom,s=void 0===v?1:v,u=e.fontSize,p=void 0===u?16:u,c=e.background,f=void 0===c?"#ececec":c,g=e.renderAllPages,y=void 0===g||g,m=e.autoResize,h=void 0===m||m,b=e.pageViewMode,w=void 0===b?t.PageViewMode.SINGLE_PAGE:b,x=e.defaultPaperSize,z=e.pageBorderWidth,L=void 0===z?1:z,S=e.fitToScreen,k=void 0!==S&&S,T=e.userStyleSheet,P=e.authorStyleSheet,E=e.style,R=e.navigateToInternalURLs,C=e.onToCLoad,O=e.onSetInstance,W=e.onMessage,A=e.onError,M=e.onReadyStateChange,V=e.onLoad,j=e.onNavigation,G=e.onHyperlink,I=e.children,N=o.useRef(null),q=o.useRef(),B=i.useRef();function D(){q.current.setOptions({fontSize:p,pageViewMode:w,zoom:s,renderAllPages:y,autoResize:h,defaultPaperSize:x,pageBorderWidth:L,fitToScreen:k})}function H(){var e,t,o=q.current,i=n.endsWith(".json"),a=r({},T?{userStyleSheet:[(e={},e[T.endsWith(".css")?"url":"text"]=T,e)]}:null,P?{authorStyleSheet:[(t={},t[P.endsWith(".css")?"url":"text"]=P,t)]}:null);i?o.loadPublication(n,a):o.loadDocument({url:n},a,{fontSize:p,pageViewMode:w,zoom:1,renderAllPages:y,autoResize:h,defaultPaperSize:x,pageBorderWidth:L,fitToScreen:!1})}o.useEffect(function(){return q.current=new t.CoreViewer({viewportElement:N.current}),D(),function(){function e(e,n){W&&W(e.content,n)}var n=function(n){return e(n,"debug")},o=function(n){return e(n,"info")},i=function(n){return e(n,"warn")};function r(e){A&&A(e.content)}function a(){M&&M(q.current.readyState)}function l(){V&&V(B.current),O&&O(s),C&&C(function(e,n){return s.showTOC(e,n)},s.isTOCVisible(),function(){return s.getTOC()})}function d(e){var n={docTitle:e.docTitle,epageCount:e.epageCount,epage:e.epage,metadata:e.metadata};B.current=n,j&&j(n)}function v(e){G&&G(e),R&&e.href&&e.internal&&s.navigateToInternalUrl(e.href)}var s=q.current;return s.addListener("debug",n),s.addListener("info",o),s.addListener("warn",i),s.addListener("error",r),s.addListener("readystatechange",a),s.addListener("loaded",l),s.addListener("nav",d),s.addListener("hyperlink",v),function(){M&&M(t.ReadyState.LOADING),s.removeListener("debug",n),s.removeListener("info",o),s.removeListener("warn",i),s.removeListener("error",r),s.removeListener("readystatechange",a),s.removeListener("loaded",l),s.removeListener("nav",d),s.removeListener("hyperlink",v),O&&O(null),N.current&&(N.current.innerHTML="")}}()},[]),o.useEffect(function(){H()},[n,P,T]),o.useEffect(function(){D()},[p,w,s,y,h,x,L,k]),o.useEffect(function(){var e;null===(e=q.current)||void 0===e||e.navigateToPage(t.Navigation.EPAGE,d-1)},[d]);var U=i.createElement(l,{ref:N,style:E,background:f});return"function"==typeof I&&I instanceof Function?I({container:U,reload:H}):U};
//# sourceMappingURL=react-vivliostyle.js.map
